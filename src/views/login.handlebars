<h2>Login</h2>

<div class="loginContainer">
  <form id="loginForm">
    Email: <input type="text" name="email"><br><br>
    Contraseña: <input type="password" name="password"><br><br>
    <input class="loginBtn" type="submit" value="Iniciar sesión">
  </form>
  <div class="btnRegisterContainer">
    <p>Si no tiene una cuenta:</p>
    <a href="/register">Registrarse</a>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
const loginForm = document.getElementById('loginForm');
loginForm.addEventListener('submit', async (event) => {
  event.preventDefault();

  const email = document.querySelector('input[name="email"]').value;
  const password = document.querySelector('input[name="password"]').value;

  const userData = {
    email,
    password
  };

  try {
    const response = await axios.post('http://localhost:8080/api/session/login', userData);
    alert("Inicio de sesion exitoso")
    loginForm.reset();
    window.location.href = '/products'
  } catch (error) {
    alert("ERROR")
    console.error(error);
  }
});
</script>